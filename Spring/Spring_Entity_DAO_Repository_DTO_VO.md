# Spring_Entity_DAO_Repository_DTO_VO


## Entity vs DAO

### Entity란?

 Spring JPA에서 `Entity` 클래스는 ORM을 통해 DB의 테이블과 1:1 매칭되는 칼럼을 필드로 가지는 객체이다.
 
 JPA를 사용할 때 이 클래스가 Entity임을 알려주기 위해 `@Entity` 어노테이션을 사용한다. 필드에는 `@Id`, `@Column`과 같은 어노테이션을 사용하여 명시한다.
 
 Entity는 **Domain 로직만 구현하고 Presentation로직은 구현하지 않는다.**
 
 ![](https://i.imgur.com/Hzxyuoe.png)
 
 Entity에서는 최대한 Setter로 인한 문제가 발생하지 않도록(일관성을 해치지 않도록) 사용을 지양한다.(자바빈 패턴)
 
 - 그럼 생성자를 통해 초기화를 진행해야 하나?(점층적 생성자 패턴)
     - > 이 또한 좋은 방법이 아니라고 한다. 생성장에 현재 넣는 값이 어떤 필드인지 명확히 알 수 없고, 매개변수끼리 순서가 바뀌더라도 코드가 모두 실행되기 전까지는 알 수 없기 때문이라고 함.

 - 그럼 어떻게 초기화를 해야하나?
     - > `Builder` 패턴을 사용한다. 맴버 변수가 많아지더라도 어떤 값을 어떤 필드에 넣는지 코드를 통해 확인할 수 있고, 필요한 값만 집어넣는 것이 가능하기 때문. -> 가독성이 올라감.
     - 단점으로는 인스턴스 생성 전 빌더가 생성되어야 하므로 여느 디자인 패턴들이 가지듯 절차가 늘어나고 관리해야할 클래스가 많아지며 구조가 복잡해진다.

### DAO란?

 `DAO`는 Data Access Object의 약자로, 실제로 DB에 접근하는 객체를 말한다. DAO는 프로젝트의 서비스 모델과 실제 데이터베이스를 연결하는 역할을 하며, JPA에서는 DB에 데이터를 CRUD하는 `Repository`객체들이 DAO를 대체한다고 볼 수 있다.

-> Spring JPA 강의 듣다보면 정리된 자료로 효율적으로 이해할 수 있을 것 같아서 구글링 중단.


## DAO와 Repository

> DAO와 REPOSITORY 모두 퍼시스턴스 로직에 대한 객체-지향적인 인터페이스를 제공하고 도메인 로직과 퍼시스턴스 로직을 분리하여 관심의 분리(separation of concerns) 원리를 만족시키는데 목적이 있다. 그러나 비록 의도와 인터페이스의 메소드 시그니처에 유사성이 존재한다고 해서 DAO와 REPOSITORY를 동일한 패턴으로 취급하는 것은 성급한 일반화의 오류를 범하는 것이다. 
> 
> DAO는 퍼시스턴스 로직인 Entity Bean을 대체하기 위해 만들어진 개념이다. DAO가 비록 객체-지향적인 인터페이스를 제공하려는 의도를 가지고 있다고 하더라도 실제 개발 시에는 하부의 퍼시스턴스 메커니즘이 데이터베이스라는 사실을 숨기려고 하지 않는다. DAO의 인터페이스는 데이터베이스의 CRUD 쿼리와 1:1 매칭되는 세밀한 단위의 오퍼레이션을 제공한다. 반면 REPOSITORY는 메모리에 로드된 객체 컬렉션에 대한 집합 처리를 위한 인터페이스를 제공한다. DAO가 제공하는 오퍼레이션이 REPOSITORY 가 제공하는 오퍼레이션보다 더 세밀하며, 결과적으로 REPOSITORY에서 제공하는 하나의 오퍼레이션이 DAO의 여러 오퍼레이션에 매핑되는 것이 일반적이다. 따라서 하나의 REPOSITORY 내부에서 다수의 DAO를 호출하는 방식으로 REPOSITORY를 구현할 수 있다.
> - 출처 : [DAO와 REPOSITORY 논쟁](http://egloos.zum.com/aeternum/v/1160846)

 글을 읽고 맥락적으로 이해한 바를 정리하자면.
 EJB(Enterprise Java Beans) Sun의 주도로 시작되었다. 개발자가 비즈니스 로직에 집중하도록 분산, 트랜잭션, 퍼시스턴스, 보안 등의 인프라스트럭쳐 서비스는 WAS에서 제공하도록 돕기 위한 목적으로 시작되었다.
 
 DAO는 Entity Bean의 퍼시스턴스 지원 기능을 대체하는 동시에 비즈니스 로직과 퍼시스턴스 로직의 명확한 분리를 위해 퍼시스턴스 로직을 캡슐화하고 도메인 레이어에 객체-지향적인 인터페이스를 제공하는 객체이다.
 
 Repository 개념은 DDD(Domain-Driven Design)의 기본 빌딩 블록중 하나로 관련이 깊다.
 
 이 둘은 기술적으로는 아주 유사하나 동일하게 취급할 수는 없다.
 
 EJB에서 통용되던 개념과 용어들이 Spring과 Hibernate와 같은 경량 프레임워크의 발전과 POJO(Plain Old Java Object) 기술의 성장에 따라서 퍼지게 되고 비슷한 역할을 하는 개념으로 자리잡은 것 같다. 하지만, 디테일하게보면 다르다.
